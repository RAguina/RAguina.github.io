<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Socios</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-9ndCyUaIbzAi2FUVXJi0CjmCapSmO7SnpJef0486qhLnuZ2cdeRhO02iuK6FUUVM" crossorigin="anonymous">
</head>
<body>
    <nav class="navbar navbar-dark bg-dark">
        <a href="/" class="navbar-brand mx-auto">Biblioteca R.A.</a>
        <a href="/socios" class="nav-item mx-1">Socios</a>
        <a href="/libros" class="nav-item mx-1">Libros</a>
        <a href="/empleados" class="nav-item mx-1">Empleados</a>
        <a href="/prestamos" class="nav-item mx-1">Lista de prestamos</a>
        <a href="/autores" class="nav-item mx-1">Lista de autores</a>
        <a href="/generos" class="nav-item mx-1">Lista de generos</a>
        <a href="/cargos" class="nav-item mx-1">Lista de cargos</a>
    </nav>
    <div class="col-md-6 mt-4 card">
        <form action="/agregar_socio" name="nombre" method="post" class="card-body">
            <h3 class="card-title">Agregar Socio</h3>
            <div class="form-group mt-4">
                <label>Nombre</label>
                <input type="text" name="nombre" class="form-control">
            </div>
            <div class="form-group mt-4">
                <label>Apellido</label>
                <input type="text" name="apellido" class="form-control">
            </div>
            <div class="form-group mt-4">
                <label>Telefono</label>
                <input type="text" name="telefono" class="form-control">
            </div>
            <div class="form-group mt-4">
                <label>DNI</label>
                <input type="text" name="dni" class="form-control">
            </div>
            <div class="form-group mt-4">
                <label>Email</label>
                <input type="text" name="email" class="form-control">
            </div>
            <div class="form-group mt-4">
                <label>Fecha de Nacimiento</label>
                <input type="date" name="fecha_nacimiento" class="form-control">
            </div>
                <input type="date" value="fecha_alta" id="fecha_alta" name="fechaAlta" class="form-control" hidden>
            
            <input type="submit" class="btn btn-primary my-4" value="Guardar">
        </form>
    </div>
    
    <div class="mt-4 text-center">
        <h1 class="card-title text-center my-5">Socios</h1>
        <table class="table table-stripped">
            <tr>
                <th>ID</th>
                <th>Nombre</th>
                <th>Apellido</th>
                <th>Telefono</th>
                <th>DNI</th>
                <th>Email</th>
                <th>Fecha de Nacimiento</th>
                <th>Alta</th>
            </tr>
            <% for(var i=0;i<socios.length;i++) { %>
            <tr>
                <td><%= socios[i].id_socio %></td>
                <td><%= socios[i].nombre %></td> 
                <td><%= socios[i].apellido %></td> 
                <td><%= socios[i].telefono %></td> 
                <td><%= socios[i].dni %></td> 
                <td><%= socios[i].email %></td> 
                <td><% if (socios[i].fecha_nacimiento !== null) { %>
                    <%= socios[i].fecha_nacimiento.toLocaleDateString() %>
                <% } else { %>
                    <!-- Manejo cuando la fecha_nacimiento es null -->
                    Fecha de nacimiento no disponible
                <% } %>
                </td>
                <td><% if (socios[i].fecha_alta !== null) { %>
                    <%= socios[i].fecha_alta.toLocaleDateString() %>
                <% } else { %>
                    <!-- Manejo cuando la fecha_alta es null -->
                    Fecha de Alta no disponible
                <% } %>
                
                </td> 
                <td>
                    <a href="/borrar_socio/<%= socios[i].id_socio %>" class="btn btn-danger">BORRAR</a>
                    <a href="/editar_socio/<%= socios[i].id_socio %>" class="btn btn-danger">EDITAR</a>
                </td>
            </tr>
            <% } %> 
        </table>
    </div>

</body>
</html>