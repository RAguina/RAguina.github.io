<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Libros</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-9ndCyUaIbzAi2FUVXJi0CjmCapSmO7SnpJef0486qhLnuZ2cdeRhO02iuK6FUUVM" crossorigin="anonymous">
</head>
<body>
    <nav class="navbar navbar-dark bg-dark">
        <a href="/" class="navbar-brand mx-auto">Biblioteca R.A.</a>
        <a href="/socios" class="nav-item mx-1">Socios</a>
        <a href="/libros" class="nav-item mx-1">Libros</a>
        <a href="/empleados" class="nav-item mx-1">Empleados</a>
        <a href="/prestamos" class="nav-item mx-1">Lista de prestamos</a>
        <a href="/autores" class="nav-item mx-1">Lista de autores</a>
        <a href="/generos" class="nav-item mx-1">Lista de generos</a>
        <a href="/cargos" class="nav-item mx-1">Lista de cargos</a>
    </nav>

    <div class="col-md-6 mt-4 card">
        <form action="/agregar_libro" name="nombre" method="post" class="card-body">
            <h3 class="card-title">Agregar Libro</h3>
            <div class="form-group mt-4">
                <label>Titulo</label>
                <input type="text" name="titulo" class="form-control">
            </div>
            <div class="form-group mt-4">
                <label>Autor(Int)</label>
                <input type="text" name="autor" class="form-control">
            </div>
            <div class="form-group mt-4">
                <label>ISBN</label>
                <input type="text" name="isbn" class="form-control">
            </div>
            <div class="form-group mt-4">
                <label>Genero(Int)</label>
                <input type="text" name="genero" class="form-control">
            </div>
            <div class="form-group mt-4">
                <label>Reseña</label>
                <input type="text" name="resena" class="form-control">
            </div>
            <div class="form-group mt-4">
                <label>Cantidad ejemplares</label>
                <input type="text" name="ejemplares" class="form-control">
            </div>
            <input type="submit" class="btn btn-primary my-4" value="Guardar">
        </form>
    </div>

    
    <div class="mt-4 text-center">
        <h1 class="card-title text-center my-5">Libros</h1>
        
        <table class="table table-stripped">
            <tr>
                <th>ID</th>
                <th>Nombre Libro</th>
                <th>Autor</th>
            </tr>
            <% for(var i=0;i<libros.length;i++) { %>
            <tr>
                <td><%= libros[i].id_libro %></td>
                <td><%= libros[i].titulo %></td>
                <% const autor = autores.find(a => a.id_autor === libros[i].autor); %>
                    <% if (autor) { %>
                        <td><%= autor.nombre %></td>
                    <% } else { %>
                        <td>No se encontró el autor</td>
                    <% } %>
                <td>
                    <a href="/borrar_libro/<%= libros[i].id_libro %>" class="btn btn-danger">BORRAR</a>
                    <a href="/editar_libros/<%= libros[i].id_libro %>" class="btn btn-danger">EDITAR</a>
                </td>
            </tr>
            <% } %> 
        </table>
    </div>
</body>
</html>